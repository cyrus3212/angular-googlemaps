<h1>{{ title }}</h1>
<a (click)="changeMap()">Change map</a>
<!-- this creates a google map on the page with the given lat/lng from -->
<!-- the component as the initial center of the map: -->
<agm-map [latitude]="lat" [longitude]="lng" [usePanning]='true' [mapTypeId]="mapTypeId">
    <!-- <agm-marker-cluster [maxZoom]='14' [imagePath]="'https://googlemaps.github.io/js-marker-clusterer/images/m'">
      <agm-marker 
        *ngFor="let m of markers; let i = index"
        iconUrl="https://www.skinsee.com/wp-content/uploads/2017/06/icon-map.png"
        
        [latitude]="m.lat"
        [longitude]="m.lng"
        
        [markerDraggable]="m.draggable" 
        (dragEnd)="markerDragEnd(m, $event)">
        
      <agm-info-window content="infowindowContent" style="padding:20px;">
        <div style="background-color:red;padding:10px;color:white">
            <strong>{{m.infowindowContent}}</strong>
        </div>
        <div class="infowindow-body" style="margin:10px;">
            <strong>{{m.lat}}</strong>
            <strong>{{m.lng}}</strong>
        </div>
      </agm-info-window>
      
    </agm-marker>
    </agm-marker-cluster>
    

    <agm-marker 
        *ngFor="let m of stores; let i = index"
        iconUrl="https://a.deviantart.net/avatars/e/r/ericrobichaud73.png?1"
        
        [latitude]="m.lat"
        [longitude]="m.lng"
        
        [markerDraggable]="m.draggable" 
        (dragEnd)="markerDragEnd(m, $event)">
        
      <agm-info-window content="infowindowContent" style="padding:20px;">
        <div style="background-color:red;padding:10px;color:white">
            <strong>{{m.infowindowContent}}</strong>
        </div>
        <div class="infowindow-body" style="margin:10px;">
            <strong>{{m.lat}}</strong>
            <strong>{{m.lng}}</strong>
        </div>
      </agm-info-window>
      
    </agm-marker>
    

    <agm-polygon 
      [paths]="markers"
      strokeWeight="4"
      strokeColor="orange"
      fillOpacity="0"
    ></agm-polygon> -->



    <div *ngFor="let m of oMarkers">
      <agm-marker *ngFor="let n of m.marker" 
        [latitude]="n.lat"
        [longitude]="n.lng"
        [iconUrl]="n.newIcon"
        (markerClick)="markerClicked(n)"
      >
      </agm-marker> 

      <!-- <agm-polygon 
      [paths]="m.marker"
      strokeWeight="3"
      strokeColor="orange"
      fillOpacity="0"
    ></agm-polygon> -->

    <agm-polyline>
      <agm-polyline-point *ngFor="let data of m.marker" 
          [latitude]="data.lat"
          [longitude]="data.lng">
      </agm-polyline-point>
  </agm-polyline>
    </div>
</agm-map>

